{% extends "base.html" %}
{% block content %}
<h2>ğŸ“Š IT Dashboard</h2>
<p style="font-size: 18px; font-weight: bold; color: #667eea;">ğŸ”´ Open Tickets: <span style="background-color: #667eea; color: white; padding: 5px 15px; border-radius: 20px;">{{ open_count }}</span></p>

{% if tickets %}
<table>
    <tr>
        <th>Ticket ID</th>
        <th>User</th>
        <th>Issue</th>
        <th>Status</th>
        <th>Priority</th>
        <th>Action</th>
    </tr>
    {% for t in tickets %}
    <tr>
        <td><strong>#{{ t.id }}</strong></td>
        <td>{{ t.name }}</td>
        <td>{{ t.issue }}</td>
        <td>
            <form method="POST" style="display: inline;">
                <select name="status" style="padding: 6px; border-radius: 4px;">
                    <option value="Open" {% if t.status == "Open" %}selected{% endif %}>ğŸ”´ Open</option>
                    <option value="In Progress" {% if t.status == "In Progress" %}selected{% endif %}>ğŸŸ¡ In Progress</option>
                    <option value="Closed" {% if t.status == "Closed" %}selected{% endif %}>ğŸŸ¢ Closed</option>
                </select>
        </td>
        <td>
                <select name="priority" style="padding: 6px; border-radius: 4px;">
                    <option value="Low" {% if t.priority == "Low" %}selected{% endif %}>âœ“ Low</option>
                    <option value="Medium" {% if t.priority == "Medium" %}selected{% endif %}>â„¹ï¸ Medium</option>
                    <option value="High" {% if t.priority == "High" %}selected{% endif %}>âš ï¸ High</option>
                </select>
        </td>
        <td>
                <input type="hidden" name="ticket_id" value="{{ t.id }}">
                <button type="submit" class="small">ğŸ’¾ Update</button>
            </form>
        </td>
    </tr>
    {% endfor %}
</table>
{% else %}
<p style="text-align: center; color: #999; padding: 40px 0;">No tickets to manage.</p>
{% endif %}
{% endblock %}
